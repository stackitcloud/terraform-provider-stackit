---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stackit_server Resource - stackit"
subcategory: ""
description: |-
  Server resource schema. Must have a region specified in the provider configuration.
  Example Usage
  With key pair
  
  resource "stackit_key_pair" "keypair" {
    name       = "example-key-pair"
    public_key = chomp(file("path/to/id_rsa.pub"))
  }
  
  resource "stackit_server" "user-data-from-file" {
    project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    name         = "example-server"
    machine_type = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
    user_data    = file("${path.module}/cloud-init.yaml")
  }
  
  
  Boot from volume
  
  resource "stackit_server" "boot-from-volume" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name       = "example-server"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    availability_zone = "eu01-1"
    machine_type      = "g2i.1"
    keypair_name      = "example-keypair"
  }
  
  
  Boot from existing volume
  
  resource "stackit_volume" "example-volume" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    size       = 12
    source = {
      type = "image"
      id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    name              = "example-volume"
    availability_zone = "eu01-1"
  }
  
  resource "stackit_server" "boot-from-volume" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name       = "example-server"
    boot_volume = {
      source_type = "volume"
      source_id   = stackit_volume.example-volume.volume_id
    }
    availability_zone = "eu01-1"
    machine_type      = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
  }
  
  
  Network setup
  
  resource "stackit_network" "network" {
    project_id         = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name               = "example-network"
    nameservers        = ["192.0.2.0", "198.51.100.0", "203.0.113.0"]
    ipv4_prefix_length = 24
  }
  
  resource "stackit_security_group" "sec-group" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name       = "example-security-group"
    stateful   = true
  }
  
  resource "stackit_security_group_rule" "rule" {
    project_id        = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    security_group_id = stackit_security_group.sec-group.security_group_id
    direction         = "ingress"
    ether_type         = "IPv4"
  }
  
  resource "stackit_network_interface" "nic" {
    project_id         = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    network_id         = stackit_network.network.network_id
    security_group_ids = [stackit_security_group.sec-group.security_group_id]
  }
  
  resource "stackit_server" "server-with-network" {
    project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name         = "example-server"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    machine_type = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
    network_interfaces = [
      stackit_network_interface.nic.network_interface_id
    ]	
  }
  
  resource "stackit_public_ip" "public-ip" {
    project_id           = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    network_interface_id = stackit_network_interface.nic.network_interface_id
  }
  
  
  Server with attached volume
  
  resource "stackit_volume" "example-volume" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    size       = 12
    performance_class = "storage_premium_perf6"
    name              = "example-volume"
    availability_zone = "eu01-1"
  }
  
  resource "stackit_server" "server-with-volume" {
    project_id        = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    name              = "example-server"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    availability_zone = "eu01-1"
    machine_type      = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
  }
  
  resource "stackit_server_volume_attach" "attach_volume" {
    project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    server_id  = stackit_server.server-with-volume.server_id
    volume_id  = stackit_volume.example-volume.volume_id
  }
  
  
  Server with user data (cloud-init)
  
  resource "stackit_server" "user-data" {
    project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    name         = "example-server"
    machine_type = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
    user_data    = "#!/bin/bash\n/bin/su"
  }
  
  resource "stackit_server" "user-data-from-file" {
    project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    boot_volume = {
      size        = 64
      source_type = "image"
      source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
    name         = "example-server"
    machine_type = "g2i.1"
    keypair_name = stackit_key_pair.keypair.name
    user_data    = file("${path.module}/cloud-init.yaml")
  }
---

# stackit_server (Resource)

Server resource schema. Must have a region specified in the provider configuration.

## Example Usage


### With key pair
```terraform
resource "stackit_key_pair" "keypair" {
  name       = "example-key-pair"
  public_key = chomp(file("path/to/id_rsa.pub"))
}

resource "stackit_server" "user-data-from-file" {
  project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  name         = "example-server"
  machine_type = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
  user_data    = file("${path.module}/cloud-init.yaml")
}

```

### Boot from volume
```terraform
resource "stackit_server" "boot-from-volume" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name       = "example-server"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  availability_zone = "eu01-1"
  machine_type      = "g2i.1"
  keypair_name      = "example-keypair"
}

```

### Boot from existing volume
```terraform
resource "stackit_volume" "example-volume" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  size       = 12
  source = {
    type = "image"
    id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  name              = "example-volume"
  availability_zone = "eu01-1"
}

resource "stackit_server" "boot-from-volume" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name       = "example-server"
  boot_volume = {
    source_type = "volume"
    source_id   = stackit_volume.example-volume.volume_id
  }
  availability_zone = "eu01-1"
  machine_type      = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
}

```

### Network setup
```terraform
resource "stackit_network" "network" {
  project_id         = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name               = "example-network"
  nameservers        = ["192.0.2.0", "198.51.100.0", "203.0.113.0"]
  ipv4_prefix_length = 24
}

resource "stackit_security_group" "sec-group" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name       = "example-security-group"
  stateful   = true
}

resource "stackit_security_group_rule" "rule" {
  project_id        = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  security_group_id = stackit_security_group.sec-group.security_group_id
  direction         = "ingress"
  ether_type         = "IPv4"
}

resource "stackit_network_interface" "nic" {
  project_id         = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  network_id         = stackit_network.network.network_id
  security_group_ids = [stackit_security_group.sec-group.security_group_id]
}

resource "stackit_server" "server-with-network" {
  project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name         = "example-server"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  machine_type = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
  network_interfaces = [
    stackit_network_interface.nic.network_interface_id
  ]	
}

resource "stackit_public_ip" "public-ip" {
  project_id           = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  network_interface_id = stackit_network_interface.nic.network_interface_id
}

```

### Server with attached volume
```terraform
resource "stackit_volume" "example-volume" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  size       = 12
  performance_class = "storage_premium_perf6"
  name              = "example-volume"
  availability_zone = "eu01-1"
}

resource "stackit_server" "server-with-volume" {
  project_id        = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name              = "example-server"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  availability_zone = "eu01-1"
  machine_type      = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
}

resource "stackit_server_volume_attach" "attach_volume" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  server_id  = stackit_server.server-with-volume.server_id
  volume_id  = stackit_volume.example-volume.volume_id
}

```

### Server with user data (cloud-init)
```terraform
resource "stackit_server" "user-data" {
  project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  name         = "example-server"
  machine_type = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
  user_data    = "#!/bin/bash\n/bin/su"
}

resource "stackit_server" "user-data-from-file" {
  project_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  }
  name         = "example-server"
  machine_type = "g2i.1"
  keypair_name = stackit_key_pair.keypair.name
  user_data    = file("${path.module}/cloud-init.yaml")
}

```

## Example Usage

```terraform
resource "stackit_server" "example" {
  project_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  name       = "example-server"
  boot_volume = {
    size        = 64
    source_type = "image"
    source_id   = "59838a89-51b1-4892-b57f-b3caf598ee2f" // Ubuntu 24.04
  }
  availability_zone = "xxxx-x"
  machine_type      = "g2i.1"
  network_interfaces = [
    stackit_network_interface.example.network_interface_id
  ]
}

# Only use the import statement, if you want to import an existing server
# Note: There will be a conflict which needs to be resolved manually.
# Must set a configuration value for the boot_volume.source_type and boot_volume.source_id attribute as the provider has marked it as required.
# Since those attributes are not fetched in general from the API call, after adding them this would replace your server resource after an terraform apply.
# In order to prevent this you need to add:
# lifecycle {
#   ignore_changes = [ boot_volume ]
# }
import {
  to = stackit_server.import-example
  id = "${var.project_id},${var.server_id}"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `machine_type` (String) Name of the type of the machine for the server. Possible values are documented in [Virtual machine flavors](https://docs.stackit.cloud/stackit/en/virtual-machine-flavors-75137231.html)
- `name` (String) The name of the server.
- `project_id` (String) STACKIT project ID to which the server is associated.

### Optional

- `affinity_group` (String) The affinity group the server is assigned to.
- `availability_zone` (String) The availability zone of the server.
- `boot_volume` (Attributes) The boot volume for the server (see [below for nested schema](#nestedatt--boot_volume))
- `desired_status` (String) The desired status of the server resource. Possible values are: `active`, `inactive`, `deallocated`.
- `image_id` (String) The image ID to be used for an ephemeral disk on the server.
- `keypair_name` (String) The name of the keypair used during server creation.
- `labels` (Map of String) Labels are key-value string pairs which can be attached to a resource container
- `network_interfaces` (List of String) The IDs of network interfaces which should be attached to the server. Updating it will recreate the server.
- `user_data` (String) User data that is passed via cloud-init to the server.

### Read-Only

- `created_at` (String) Date-time when the server was created
- `id` (String) Terraform's internal resource ID. It is structured as "`project_id`,`server_id`".
- `launched_at` (String) Date-time when the server was launched
- `server_id` (String) The server ID.
- `updated_at` (String) Date-time when the server was updated

<a id="nestedatt--boot_volume"></a>
### Nested Schema for `boot_volume`

Required:

- `source_id` (String) The ID of the source, either image ID or volume ID
- `source_type` (String) The type of the source. Possible values are: `volume`, `image`.

Optional:

- `delete_on_termination` (Boolean) Delete the volume during the termination of the server. Only allowed when `source_type` is `image`.
- `performance_class` (String) The performance class of the server.
- `size` (Number) The size of the boot volume in GB. Must be provided when `source_type` is `image`.

Read-Only:

- `id` (String) The ID of the boot volume
